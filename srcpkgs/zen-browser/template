# Template file for 'zen-browser'
pkgname=zen-browser
version=1.18.2
revision=1
makejobs=4
hostmakedepends="pkg-config git cargo nodejs rust-sccache lld21"
makedepends="python3 curl python3-pip libvips-devel base-devel curl tar clang llvm alsa-lib-devel pulseaudio-devel cbindgen libXrandr-devel libXcomposite-devel libXcursor-devel libXdamage-devel nasm wasi-sdk-32bit wasi-sdk wayland-devel gtk+3-devel"
depends="gtk+3 libstdc++  pango atk cairo gdk-pixbuf glib libxcb libX11 libXext libXrandr libXcomposite libXcursor libXdamage libXfixes libXi libXrender alsa-lib freetype fontconfig dbus-libs"
short_desc="New Browser based on Firefox"
maintainer="Bella Wagner <belladev109@proton.me>"
license="GPL-3.0-only"
homepage="https://github.com/zen-browser/desktop"
#distfiles="https://github.com/zen-browser/desktop/archive/refs/tags/${version}b.tar.gz"
#checksum=5ad69ad25bac979b1df2527c340114b260716e28cc7784fe6083be62586ccb05

pre_fetch() {
	if [ -d $wrksrc ]; then
		rm -rf $wrksrc
	fi
}

do_fetch() {
	git clone --depth=10 $homepage $wrksrc
}

pre_build() {
	npm i
	npm run init
	python3 ./scripts/update_en_US_packs.py
}

do_build() {
	MOZ_PARALLEL_BUILD=4
	npm run build
}

do_install() {
	echo LOL
}
